<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>XPMP2: Wake Turbulence Support</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">XPMP2
   </div>
   <div id="projectbrief">X-Plane multiplayer library 2 - using instancing</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Wake Turbulence Support </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>X-Plane 12 started to <a href="https://developer.x-plane.com/2022/02/wake-turbulence/">support wake turbulence</a> also for TCAS targets. While X-Plane provides a fixed default (of a comparibly small jet) in case no additional information is available, its true capacbilities only come to light when fed with details about the actual plane's dimensions and mass.</p>
<p>Keep in mind that <a class="el" href="namespaceXPMP2.html">XPMP2</a> does <em>not</em> build upon AI aircraft, so from X-Plane's point of view <a class="el" href="namespaceXPMP2.html">XPMP2</a>'s planes are just some random instanced objects. X-Plane does not actually place wakes behind instanced objects! Instead, X-Plane refers to the <a href="https://developer.x-plane.com/article/overriding-tcas-and-providing-traffic-information/">TCAS target information</a> to calculate wakes. <a href="https://developer.x-plane.com/article/plugin-traffic-wake-turbulence/">Some dataRefs</a> have been added there for additional information to calculate matching wakes, specifically:</p><ul>
<li>Wing span and area</li>
<li>Mass</li>
<li>Lift</li>
<li>Angle of Attack (AoA)</li>
</ul>
<h1><a class="anchor" id="autotoc_md42"></a>
Defaults</h1>
<p>As a trade-off between complexity (knowing exact wing dimensions and weight/lift of any plane) and results (strength of the wake) <a class="el" href="namespaceXPMP2.html">XPMP2</a> applies defaults to the aircraft dimensions based on the Wake Turbulence Category (WTC) listed in the <code>Doc8643</code> data, which is looked up based on the <code>icaoType</code>. If the <code>icaoType</code> isn't found then a default WTC of <code>M</code> is assumed.</p>
<p>So even if you don't provide any overrides in your plugin implementation, there's are reasonable factors in place to provide about matching wakes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">WTC   </th><th class="markdownTableHeadNone">Span [m]   </th><th class="markdownTableHeadNone">Area [m^2]   </th><th class="markdownTableHeadNone">Weight [kg]   </th><th class="markdownTableHeadNone">Reference    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">L   </td><td class="markdownTableBodyNone">11.00   </td><td class="markdownTableBodyNone">16.2   </td><td class="markdownTableBodyNone">1,038   </td><td class="markdownTableBodyNone"><a href="http://www.flugzeuginfo.net/acdata_php/acdata_cessna172_en.php">C172</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">L/M   </td><td class="markdownTableBodyNone">17.65   </td><td class="markdownTableBodyNone">28.8   </td><td class="markdownTableBodyNone">6,301   </td><td class="markdownTableBodyNone"><a href="http://www.flugzeuginfo.net/acdata_php/acdata_beech350_en.php">B350</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">M   </td><td class="markdownTableBodyNone">34.09   </td><td class="markdownTableBodyNone">122.6   </td><td class="markdownTableBodyNone">74,500   </td><td class="markdownTableBodyNone"><a href="http://www.flugzeuginfo.net/acdata_php/acdata_a320_en.php">A320</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">H   </td><td class="markdownTableBodyNone">64.40   </td><td class="markdownTableBodyNone">541.2   </td><td class="markdownTableBodyNone">367,129   </td><td class="markdownTableBodyNone"><a href="http://www.flugzeuginfo.net/acdata_php/acdata_7474_en.php">B744</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">J   </td><td class="markdownTableBodyNone">79.80   </td><td class="markdownTableBodyNone">845.0   </td><td class="markdownTableBodyNone">510,560   </td><td class="markdownTableBodyNone"><a href="http://www.flugzeuginfo.net/acdata_php/acdata_a380_en.php">A388</a>   </td></tr>
</table>
<p>with <code>Weight = Empty Weight + 80% * (MTOW - Empty Weight)</code></p>
<p>Default <b>Lift</b> is Weight multiplied by <code>9.81</code>, ie. standard gravity. No g load is taken into account.</p>
<p>Default <b>AoA</b> is the plane's pitch, which should be fairly accurate.</p>
<h1><a class="anchor" id="autotoc_md43"></a>
Overriding Values in Your Plugin</h1>
<p>A plugin using <a class="el" href="namespaceXPMP2.html">XPMP2</a> can opt to provide its own values for even more precice results. Search <code>XPMP2Aircraft.h</code> for "Wake support" to find the group of functions to support wake tubulence definition.</p>
<p><code>WakeApplyDefaults()</code> sets wing span, area, and weight as per above defaults.</p>
<p>The various <code>Get/Set</code> functions get/set wing span, area, weight individually.</p>
<p>As angle of attack and lift may change very dynamically they are implemented as <code>virtual</code> functions that you can override in your own aircraft class:</p>
<ul>
<li><code>virtual float <a class="el" href="classXPMP2_1_1Aircraft.html#ae3eafb6479522bf89ba8af210d44e9eb" title="Angle of Attach, returns pitch (but you can override in your class)">XPMP2::Aircraft::GetAoA() const</a></code></li>
<li><code>virtual float GetLift() const</code></li>
</ul>
<p>There's one specific case a plugin may want to consider, which is the transition between ground and airborne operation: There is no wake behind a taxiing wake because there is no lift produced. Wake gradually appears during the take-off roll and fades during rollout after landing.</p>
<p>If you want to simulate this you should override <code><a class="el" href="classXPMP2_1_1Aircraft.html#a7a2e31fda6d4283ae1c5620c71642ee1" title="Lift produced. You should override to blend in/out for take-off/landing, but XPMP2 has no dynamic inf...">XPMP2::Aircraft::GetLift()</a></code>. See LiveTraffic's <code>LTAircraft::GetLift()</code> for an example in its <a href="https://github.com/TwinFan/LiveTraffic/blob/master/Src/LTAircraft.cpp"><code>LTAircraft.cpp</code> file</a>, which take information as input that <a class="el" href="namespaceXPMP2.html">XPMP2</a> doesn't have but only the plugin that controls the aircraft in motion. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
